# ContentZavod

Генератор контента для Telegram-канала в авторском стиле. Забирает идеи из чата, исследует тему, генерирует посты с изображениями и публикует — всё через команды Claude Code.

## Возможности

- Автоматический сбор идей из Telegram-чата
- Исследование темы через веб-поиск
- Генерация постов в настроенном авторском стиле
- Подбор изображений из источников или генерация через AI
- Публикация в Telegram одной командой
- 3 параллельных варианта текста — выбирается лучший

## Требования

- [Claude Code CLI](https://docs.anthropic.com/en/docs/claude-code)
- Telegram-бот (создать через [@BotFather](https://t.me/botfather))
- Два Telegram-чата: для идей и для контент-плана
- (Опционально) [OpenRouter API key](https://openrouter.ai/) — для генерации изображений

## Быстрый старт

1. **Используйте как шаблон** — нажмите «Use this template» на GitHub

2. **Настройте окружение:**
   ```bash
   cp .env.example .env
   # Заполните .env своими токенами и ID чатов
   ```

3. **Опишите свой стиль:**
   - Отредактируйте `style/voice.md` — опишите тон, аудиторию, приёмы
   - Положите примеры постов в `style/examples/` (по файлу на пост)
   - Замените `[ИМЯ_АВТОРА]` и `[ПРОЕКТ_АВТОРА]` в скиллах на свои данные

4. **Настройте Telegram-бота:**
   - Добавьте бота в оба чата (идеи + контент-план)
   - Дайте боту права на удаление сообщений в чате идей

5. **Запустите:**
   ```bash
   claude
   # В Claude Code:
   /contentpost
   ```

## Структура проекта

```
├── .claude/
│   ├── commands/contentpost.md     # Команда запуска
│   └── skills/
│       ├── authorstyle/            # Скилл генерации в авторском стиле
│       └── contentpost/            # Скилл полного цикла публикации
├── style/
│   ├── voice.md                    # Описание голоса и стиля автора
│   └── examples/                   # Примеры постов для имитации
├── output/                         # Сгенерированные материалы
├── state/                          # Состояние бота (gitignored)
├── agent_docs/                     # Проектная документация
├── .env.example                    # Шаблон переменных окружения
├── AGENTS.md                       # Правила для AI-агентов
└── CLAUDE.md                       # Конфигурация Claude Code
```

## Команды

| Команда | Описание |
|---------|----------|
| `/contentpost` | Забрать идеи из чата, сгенерировать посты и опубликовать |

## Как работает конвейер

```
Чат идей → getUpdates → Исследование темы (WebSearch)
  → 3 субагента генерируют варианты текста
  → Выбор лучшего по критериям стиля
  → Поиск/генерация изображения
  → Публикация в чат контент-плана (фото + caption)
  → Удаление обработанной идеи
```

## Настройка стиля

Ключевой файл — `style/voice.md`. В нём описаны:
- Тон и характер (формальный/неформальный, с юмором или без)
- Целевая аудитория
- Структура постов (заголовок, контекст, разбор, вывод)
- Характерные приёмы (ваши «фишки»)
- Форматирование (эмодзи, списки, длина)
- Табу (чего избегать)

Чем больше примеров в `style/examples/`, тем точнее имитация.

## Лицензия

MIT — см. [LICENSE](LICENSE).
